<!-- src/app/shared/components/search-bar/search-bar.component.html -->
<div class="search-container mx-2 mt-2">
  <input [formControl]="searchControl" placeholder="ابحث عن قناة..." />
  <div class="search-icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="11" cy="11" r="8"></circle>
      <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </div>

  @if (isLoading) {
  <div class="loading-indicator">جاري البحث...</div>
  }

  @if (searchResults.length) {
  <ul class="results-list">
    @for (channel of searchResults; track $index) {
    <li (click)="selectChannel(channel)" class="channel-item">
      <div class="channel-logo">
        <img [src]="channel.logo?.url" [alt]="channel.channel_name"
          onerror="this.src='assets/images/default-channel-logo.png'">
      </div>
      <div class="channel-info">
        <div class="channel-name">{{ channel.channel_name }}</div>
        <div class="channel-details">
          <span class="satellite">{{ channel.satellite_info?.satellite_name }}</span>
          <span class="position">{{ channel.satellite_info?.position }}</span>
          <span class="frequency">{{ channel.technical_info?.frequency?.text }}</span>
        </div>
        <div class="channel-country">{{ channel.metadata?.country }}</div>
      </div>
    </li>
    } @empty {
    <div class="no-results">لا توجد نتائج</div>
    }
  </ul>
  }
</div>